{"ast":null,"code":"import _slicedToArray from\"/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchComponent=function SearchComponent(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),keyword=_useState2[0],setKeyword=_useState2[1];var _useState3=useState('all'),_useState4=_slicedToArray(_useState3,2),searchType=_useState4[0],setSearchType=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchResult=_useState6[0],setSearchResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),keywordValidity=_useState8[0],setKeywordValidity=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var navigate=useNavigate();var location=useLocation();useEffect(function(){var queryParams=new URLSearchParams(location.search);var queryKeyword=queryParams.get('keyword');var querySearchType=queryParams.get('searchType');if(queryKeyword){setKeyword(queryKeyword);setKeywordValidity(queryKeyword.trim().length>=1);}if(querySearchType){setSearchType(querySearchType);}if(queryKeyword&&querySearchType){handleSearch();}},[location.search]);var updateKeyword=function updateKeyword(event){var newKeyword=event.currentTarget.value;setKeyword(newKeyword);var isValid=newKeyword.trim().length>=1;setKeywordValidity(isValid);};var updateSearchType=function updateSearchType(event){setSearchType(event.currentTarget.value);};var handleSearch=function handleSearch(){setLoading(true);var apiUrl=\"/search?keyword=\".concat(encodeURIComponent(keyword),\"&searchType=\").concat(encodeURIComponent(searchType));axios.get(apiUrl).then(function(response){setSearchResult(response.data);setLoading(false);navigate(\"/search?keyword=\".concat(encodeURIComponent(keyword),\"&searchType=\").concat(encodeURIComponent(searchType)));}).catch(function(error){console.error('검색 에러:',error);setLoading(false);});};useEffect(function(){if(searchResult.length>0){navigate(\"/search?keyword=\".concat(encodeURIComponent(keyword),\"&searchType=\").concat(encodeURIComponent(searchType)));}},[searchResult]);var handleKeyPress=function handleKeyPress(event){if(event.key==='Enter'){handleSearch();}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"select\",{value:searchType,onChange:updateSearchType,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\uC804\\uCCB4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"region\",children:\"\\uAD11\\uC5ED\\uC2DC\\uB3C4\\uBA85\"}),/*#__PURE__*/_jsx(\"option\",{value:\"destination\",children:\"\\uAD00\\uAD11\\uC9C0\\uBA85\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tag\",children:\"\\uD0DC\\uADF8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"restaurant\",children:\"\\uC2DD\\uB2F9\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uAC80\\uC0C9\\uC5B4 \\uC785\\uB825\",value:keyword,onChange:updateKeyword,onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleSearch();},disabled:!keywordValidity||loading,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-list\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"\\uB85C\\uB529 \\uC911...\"}),!loading&&searchResult.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"result-card-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"result-image-container\",children:(item.url1||item.r_imgUrl)&&/*#__PURE__*/_jsx(\"img\",{src:item.url1||item.r_imgUrl,alt:item.roadAdress})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-details\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"result-name\",children:item.destName||item.restName}),/*#__PURE__*/_jsxs(\"p\",{className:\"result-addr\",children:[item.restAdress||item.roadAdress,\" \"]}),/*#__PURE__*/_jsx(\"p\",{className:\"result-tag\",children:item.tag||item.restCategory})]})]},index);}),!loading&&searchResult.length===0&&keywordValidity&&/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})]})]});};export default SearchComponent;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","SearchComponent","_useState","_useState2","_slicedToArray","keyword","setKeyword","_useState3","_useState4","searchType","setSearchType","_useState5","_useState6","searchResult","setSearchResult","_useState7","_useState8","keywordValidity","setKeywordValidity","_useState9","_useState10","loading","setLoading","navigate","location","queryParams","URLSearchParams","search","queryKeyword","get","querySearchType","trim","length","handleSearch","updateKeyword","event","newKeyword","currentTarget","value","isValid","updateSearchType","apiUrl","concat","encodeURIComponent","then","response","data","catch","error","console","handleKeyPress","key","children","className","onChange","type","placeholder","onKeyPress","onClick","disabled","map","item","index","url1","r_imgUrl","src","alt","roadAdress","destName","restName","restAdress","tag","restCategory"],"sources":["/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/src/components/search/Search1.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nconst SearchComponent = () => {\n  const [keyword, setKeyword] = useState('');\n  const [searchType, setSearchType] = useState('all');\n  const [searchResult, setSearchResult] = useState([]);\n  const [keywordValidity, setKeywordValidity] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const queryKeyword = queryParams.get('keyword');\n    const querySearchType = queryParams.get('searchType');\n\n    if (queryKeyword) {\n      setKeyword(queryKeyword);\n      setKeywordValidity(queryKeyword.trim().length >= 1);\n    }\n\n    if (querySearchType) {\n      setSearchType(querySearchType);\n    }\n\n    if (queryKeyword && querySearchType) {\n      handleSearch();\n    }\n  }, [location.search]);\n\n  const updateKeyword = (event) => {\n    const newKeyword = event.currentTarget.value;\n    setKeyword(newKeyword);\n    const isValid = newKeyword.trim().length >= 1;\n    setKeywordValidity(isValid);\n  };\n\n  const updateSearchType = (event) => {\n    setSearchType(event.currentTarget.value);\n  };\n\n  const handleSearch = () => {\n    setLoading(true);\n\n    const apiUrl = `/search?keyword=${encodeURIComponent(keyword)}&searchType=${encodeURIComponent(searchType)}`;\n    axios\n      .get(apiUrl)\n      .then((response) => {\n        setSearchResult(response.data);\n        setLoading(false);\n        navigate(`/search?keyword=${encodeURIComponent(keyword)}&searchType=${encodeURIComponent(searchType)}`);\n      })\n      .catch((error) => {\n        console.error('검색 에러:', error);\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    if (searchResult.length > 0) {\n      navigate(`/search?keyword=${encodeURIComponent(keyword)}&searchType=${encodeURIComponent(searchType)}`);\n    }\n  }, [searchResult]);\n\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter') {\n      handleSearch();\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"search-container\">\n        <select value={searchType} onChange={updateSearchType}>\n          <option value=\"all\">전체</option>\n          <option value=\"region\">광역시도명</option>\n          <option value=\"destination\">관광지명</option>\n          <option value=\"tag\">태그</option>\n          <option value=\"restaurant\">식당</option>\n        </select>\n        <input\n          type=\"text\"\n          placeholder=\"검색어 입력\"\n          value={keyword}\n          onChange={updateKeyword}\n          onKeyPress={handleKeyPress}\n        />\n        <button onClick={() => { handleSearch(); }} disabled={!keywordValidity || loading}>\n          검색\n        </button>\n      </div>\n      <div className=\"result-list\">\n        {loading && <p className=\"no-results\">로딩 중...</p>}\n        {!loading && searchResult.map((item, index) => (\n          <div key={index} className=\"result-item\">\n            <div className=\"result-card-content\">\n              <div className=\"result-image-container\">\n              {(item.url1 || item.r_imgUrl) && <img src={item.url1 || item.r_imgUrl} alt={item.roadAdress} />}\n            </div>\n            </div>\n            <div className=\"result-details\">\n              <p className=\"result-name\">{item.destName || item.restName}</p>\n              <p className=\"result-addr\">{item.restAdress || item.roadAdress} </p>\n              <p className=\"result-tag\">{item.tag || item.restCategory}</p>\n            </div>\n            </div>\n        ))}\n        \n        {!loading && searchResult.length === 0 && keywordValidity && <p className=\"no-results\">검색 결과가 없습니다.</p>}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}