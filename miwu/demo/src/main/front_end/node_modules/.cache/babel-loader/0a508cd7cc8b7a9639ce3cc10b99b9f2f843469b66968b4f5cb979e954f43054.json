{"ast":null,"code":"import _regeneratorRuntime from\"/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Recommend=function Recommend(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),topDestinations=_useState2[0],setTopDestinations=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentSlide=_useState4[0],setCurrentSlide=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentImageIndex=_useState6[0],setCurrentImageIndex=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];useEffect(function(){fetchData();var intervalId=setInterval(function(){nextImage();},3000);return function(){return clearInterval(intervalId);};},[currentImageIndex,currentSlide]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_categories;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/img/categorytop3');case 3:response=_context.sent;setTopDestinations(response.data);// 카테고리 정보 추출\n_categories=response.data.map(function(destination){return destination.category;});setCategories(_categories.filter(function(value,index,self){return self.indexOf(value)===index;}));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();var nextImage=function nextImage(){if(currentImageIndex<2){setCurrentImageIndex(function(prevIndex){return prevIndex+1;});}else{setCurrentImageIndex(0);nextSlide();}};var nextSlide=function nextSlide(){if(currentSlide<topDestinations.length/3-1){setCurrentSlide(function(prevSlide){return prevSlide+1;});}else{setCurrentSlide(0);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-top3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCE74\\uD14C\\uACE0\\uB9AC\\uBCC4 \\uCD94\\uCC9C \\uAD00\\uAD11\\uC9C0\"}),categories.map(function(category,categoryIndex){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"recommend-name\",children:topDestinations[currentSlide*3].mcategory}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-list\",children:topDestinations.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:[0,1,2].map(function(index){return/*#__PURE__*/_jsx(\"div\",{className:\"recommend_card \".concat(index===currentSlide?'active':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"recommend-card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"recommend-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:topDestinations[currentSlide*3+index][\"url\".concat(currentImageIndex+1)],alt:topDestinations[currentSlide*3+index].roadAdress})}),/*#__PURE__*/_jsx(\"div\",{className:\"recommend-details\",children:/*#__PURE__*/_jsx(\"p\",{className:\"recommend-name\",children:topDestinations[currentSlide*3+index].destName})})]})},index);})})})]},categoryIndex);})]});};export default Recommend;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Recommend","_useState","_useState2","_slicedToArray","topDestinations","setTopDestinations","_useState3","_useState4","currentSlide","setCurrentSlide","_useState5","_useState6","currentImageIndex","setCurrentImageIndex","_useState7","_useState8","categories","setCategories","fetchData","intervalId","setInterval","nextImage","clearInterval","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_categories","wrap","_callee$","_context","prev","next","get","sent","data","map","destination","category","filter","value","index","self","indexOf","t0","console","error","stop","apply","arguments","prevIndex","nextSlide","length","prevSlide","className","children","categoryIndex","mcategory","concat","src","alt","roadAdress","destName"],"sources":["/Users/seon/Documents/GitHub/miwu/miwu/miwu/demo/src/main/front_end/src/components/search/Recommend.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst Recommend = () => {\n  const [topDestinations, setTopDestinations] = useState([]);\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [categories, setCategories] = useState([]);\n\n  useEffect(() => {\n    fetchData();\n\n    const intervalId = setInterval(() => {\n      nextImage();\n    }, 3000);\n\n    return () => clearInterval(intervalId);\n  }, [currentImageIndex, currentSlide]);\n\n  const fetchData = async () => {\n    try {\n      const response = await axios.get('/api/img/categorytop3');\n      setTopDestinations(response.data);\n\n      // 카테고리 정보 추출\n      const categories = response.data.map((destination) => destination.category);\n      setCategories(categories.filter((value, index, self) => self.indexOf(value) === index));\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  const nextImage = () => {\n    if (currentImageIndex < 2) {\n      setCurrentImageIndex((prevIndex) => prevIndex + 1);\n    } else {\n      setCurrentImageIndex(0);\n      nextSlide();\n    }\n  };\n\n  const nextSlide = () => {\n    if (currentSlide < topDestinations.length / 3 - 1) {\n      setCurrentSlide((prevSlide) => prevSlide + 1);\n    } else {\n      setCurrentSlide(0);\n    }\n  };\n\n  return (\n    <div className=\"recommend-top3\">\n      <h2>카테고리별 추천 관광지</h2>\n      {categories.map((category, categoryIndex) => (\n        \n        <div key={categoryIndex}>\n        <p className=\"recommend-name\">\n                     {topDestinations[currentSlide * 3 ].mcategory}\n                        </p>\n          <div className=\"recommend-list\">\n            {topDestinations.length > 0 && (\n              <>\n                {[0, 1, 2].map((index) => (\n                  <div\n                    key={index}\n                    className={`recommend_card ${index === currentSlide ? 'active' : ''}`}\n                  >\n                    <div className=\"recommend-card-content\">\n                      <div className=\"recommend-image-container\">\n                        <img\n                          src={topDestinations[currentSlide * 3 + index][`url${currentImageIndex + 1}`]}\n                          alt={topDestinations[currentSlide * 3 + index].roadAdress}\n                        />\n                      </div>\n                      <div className=\"recommend-details\">\n                        <p className=\"recommend-name\">\n                         {topDestinations[currentSlide * 3 + index].destName}\n                        </p>\n                     \n        \n                      \n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Recommend;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}